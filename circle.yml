machine:
  java:
    version: oraclejdk8
  environment:
    GIT_AUTHOR_NAME: CircleCI
    GIT_AUTHOR_EMAIL: circleci@circleci.com

deployment:
  snapshot:
    branch: /.*-CANDIDATE/
    commands:
     - git config --global user.name $GIT_AUTHOR_NAME
     - git config --global user.email $GIT_AUTHOR_EMAIL
     - lein deploy snapshots
  release:
    branch: master
    commands:
     - git config --global user.name $GIT_AUTHOR_NAME
     - git config --global user.email $GIT_AUTHOR_EMAIL
     - lein do deploy, vcs tag --no-sign :prefix "v", vcs push
