machine:
  java:
    version: oraclejdk8
  environment:
    GIT_AUTHOR_NAME: CircleCI
    GIT_AUTHOR_EMAIL: circleci@circleci.com

deployment:
  snapshot:
    branch: /.*-SNAPSHOT/
    commands:
     - git config --global user.name $GIT_AUTHOR_NAME
     - git config --global user.email $GIT_AUTHOR_EMAIL
     - lein deploy snapshots

test:
  override:
    - mkdir -p $CIRCLE_TEST_REPORTS
    - lein test-all
